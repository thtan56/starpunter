<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Vue.js-Index.html</title>
  <link href='https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Material+Icons' rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/vuetify/1.3.4/vuetify.css" rel="stylesheet">

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
</head>
<body>
<div id="app">
  <v-app id="inspire">
    <v-container fluid grid-list-md>
      <v-data-iterator :items="pools" :rows-per-page-items="rowsPerPageItems" :pagination.sync="pagination"
        content-tag="v-layout" row wrap>
        <v-toolbar slot="header" class="mb-2" color="indigo darken-5" dark flat>
          <v-toolbar-title>Buy Ticket</v-toolbar-title>
        </v-toolbar>
  
        <v-flex slot="item" slot-scope="props" xs12 sm6 md4 lg4>    <!-- lg3 = control width -->
          <v-card color='green'>     <!-- 1 box -->
            <v-card-title class="subheading font-weight-bold">Entry cost:{{ props.item.entry_cost }}
              -{{ props.item.organiser }}
            </v-card-title>
            <v-divider></v-divider>
            <v-list dense>
              <v-list-tile>
                <v-list-tile-content>Entry Quorum:</v-list-tile-content>
                <v-list-tile-content class="align-end">{{ props.item.entrants }} / {{ props.item.entry_quorum }}</v-list-tile-content>
              </v-list-tile>
              <v-list-tile>
                <v-list-tile-content>Pool Prize:</v-list-tile-content>
                <v-list-tile-content class="align-end">{{ props.item.pool_prize }}</v-list-tile-content>
              </v-list-tile>
              <v-list-tile>
                <v-list-tile-content>Payout:</v-list-tile-content>
                <v-list-tile-content class="align-end">{{ props.item.payout }}</v-list-tile-content>
              </v-list-tile>
              <v-list-tile>
                <v-list-tile-content>Pool Name:</v-list-tile-content>
                <v-list-tile-content class="align-end">{{ props.item.name }}</v-list-tile-content>
              </v-list-tile>
              <v-list-tile>
                <v-list-tile-content>Pool Type:</v-list-tile-content>            
                <v-list-tile-content class="align-end">{{ props.item.pool_type }}</v-list-tile-content>
              </v-list-tile>  
              <v-list-tile>
                <v-list-tile-content>Pool#:</v-list-tile-content>            
                <v-list-tile-content class="align-end">{{ props.item.id }}</v-list-tile-content>
              </v-list-tile>       
            </v-list>
          </v-card>
        </v-flex>
        
      </v-data-iterator>
    </v-container>
  </v-app>
</div>
<script src="https://cdn.jsdelivr.net/npm/vue@2.5.17/dist/vue.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vuetify@1.3.4/dist/vuetify.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue-resource@1.5.1"></script>

<script>
new Vue({
  el: '#app',
  data: () => ({
    rowsPerPageItems: [4, 8, 12],
    pagination: { rowsPerPage: 4 },
    pools: []
  }),
  methods: {
    getAllData: function () {
      console.log("1) getAllData");
      this.result = 'Getting data from server...';
      var postdata = { op: "getPools" };    // name, date
      this.$http.post('php/apiPool.php', JSON.stringify(postdata), {
          headers: { 'Content-Type': 'application/json' }
        }).then(response => { 
          this.pools = response.body.data;
          console.log(this.pools);
        },      response => { this.result = 'Failed to load data to server.';
        });
      },
    },
    beforeMount(){
      this.getAllData();
    }  
});   // Vue
</script>
</body>
</html>