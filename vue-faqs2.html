<!doctype html>
<html>
	<head>
	  <meta charset="UTF-8">
		<title>Fetch records from MySQL Database with Vue.js and PHP</title>	
  <link href='https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Material+Icons' rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/vuetify/1.1.14/vuetify.css" rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
	</head>
	<body>	
		<div id='myapp'>			
			<v-data-table	:headers="headers" :items="tabledata"
    								hide-actions class="elevation-1">
    		<template slot="items" slot-scope="props">
      		<td v-for="header in headers"> {{ props.item[header.value] }}</td>
    		</template>
  		</v-data-table>
		</div>
		<script src="https://unpkg.com/vue"></script>
		<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/vuetify/1.1.14/vuetify.js"></script>
		<!-- Script -->
		<script>
			var app = new Vue({
				el: '#myapp',
	  		data () {
    			return {
    				data: [],
					  headers: [	{ text: 'City', value: 'city' },	{ text: 'Status', value: 'status' }	],
						tabledata: [],
					}
				},
				methods: {
					recordByID(id) {
						axios.get('database/json_faqs.php', { params: { id: id } })
							.then(function (response) {	
						  	this.data = response.data;												// 
								this.tabledata = JSON.parse(this.data[0].notes);  // 1) convert string to json object
								console.log('2) recordByID:'+id);
								console.log(this.tabledata);
								let keys=Object.keys(this.tabledata[0]);
								this.headers = [];
								for (let i=0; i < keys.length; i++) {
									this.headers.push( {"text": keys[i], "value": keys[i]} );
								}
							})
						  .catch(function (error) {	console.log(error);	});
					},
				},       // methods
			  beforeMount() {
  		 		this.recordByID(1);
  			}
			});
		</script>
	</body>
</html>
